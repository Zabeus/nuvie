Nuvie TODO List
---------------

**Note**
We have a new set of progress documents. They are kept in the docs repository. Accessible via cvs.



Cursors:
In normal/move mode (no pending action), cursor is standard arrow over ever
area but the MapWindow. Above the MapWindow it is a directional arrow, or the
small crosshair when over the player. MouseDown over the player passes.
In Look/Talk/Get/Drop/etc modes, the cursor is the small crosshair everywhere.
While talking or displaying a portrait, the cursor is the small crosshair
everywhere. Clicking anywhere in the MapWindow, or one of the buttons, or
any object slot in the Inventory scrolls down the page in MsgScroll.

Finish eggs:
We don't fully understand the egg data (Y, Z, Quality).
How does U6 determine where to spawn the contents? Some monsters seem
grouped together, others spawn a distance from eachother. (if fighting)

Add these options to the command line:
nuvie [options] game(from config)
-h, --help
-s, --savedir, savegame directory ?
?? config location
?? Set gametype or location
datadir contains patch data for each game-type
one game can merge data with that in another gamedir

Talk:
MD SE talking
Finish not completely implemented/known instructions:
    0xbf - alternate inventory/portrait view (or is it 0xbe?)
    0xc7 - objinparty, return value unclear
    0x9c - anything we are missing when we Horse an actor?
    0x9e - sleeping at inns unimplemented
    0xd6 - can't resurrect when actors can't even die!
    0xdb - unpoison actors

Event:
Move objects within the party and into containers
Take low-level input handling out of Event and make a keybinder.
Take higher-level functions and move to PlayerAction class. This will be able
to queue actions, and will handle the "mode" that Event has now. It may be where
global actions (quit/save/load?) are too.

DragnDrop:
Should be able to drop objects on other non-passable objects (move rope to table)
Don't drag skiffs to land (check object's passable?)
When dragging object, show cursor as indicator if object can be dropped in a
location.

U6TileManager? TileManager controls whether or not a tile is a poison or fire
field and damages actor, and when to start/stop environmental sound effects.

UseCode:
Execute Usecode for post-move actions (frame changes), and when entering/leaving
the screen area.
Ex: call an event on "chair" when actor steps on it, to change to sit frame
 (This can be used to implement poison/sleep fields.)
U6ObjectTypes: only use one function per object if possible (purpose of events)

MsgScroll:
Give message scroller and other GUI areas some high-level I/O methods
Screenfulls of text should pause even if
not indicated in data, but a break indicated in the data + a screenfull of text
should not cause two breaks (requiring player to ESC twice).
PgUp/Dn

Iolo "gather" should not gather gold from the Avatar's bags
     "split" does take all gold from the Avatar's bags, but adds outside of bags

How does U6 determine the maximum stack-quantity for objects? If I dial up 99
powder kegs from Iolo, it should fill 99 slots in the inventory, rather than
adding a powder keg with a quantity of 99.

Actors:
Improve Party following
Implement speed in LPath (actors walking to work location get up to 4 moves)
And with LPath, NPCs travel wide angles along roads instead of shortest path
to destination (it is not solely based on terrain score).
New Follow pathfinder, follow an actor (if on same plane), with give-up distance
    (also run from actor)
New Monster pathfinder
Add ActorAction to do things like walking to a destination, and worktypes?

Move static mode out of U6Actor::wt_beg because it affects all actors with that
worktype. Change worktype to wander after talked to player.

Actor::[check]move error/status struct (so that calling function can check)
Actor::[check]move: take move_flags argument (replace current bools force_move/ignore_others)

Fix actor draw order issues.

Move Configuration search to Configuration or somewhere so it can be used in
tools.

Effect: The way pause/resume while doing effects is interesting. If one effect
chains another, it may step out of wait mode before the original effect is
complete. By default this displays the prompt for some effects, so you get
multiple prompts. Fix this.
And while on the subject, need to correctly handle pausing the GameClock and
animations. (perhaps sound effects)

things to do:
raft
balloon
fadeout & time-advance (working on it)
camping
combat, combat worktypes
weapons
sfx ... find some sfx (from FM-TOWNS, SNES or C64)
weather/ wind direction
map wrapping
magic
intro/end sequences
game/gameselect menu(s)

wishlist:
real-time mode (but not during combat)
smooth map/actor movement (see SNES U6)
DIAMOND, CROWD (random), and COMBAT party formations
full-screen map w/multiple scales
movable Views
command console
setup screen/config menu (start with on first run)
enhanced & classic modes: enable/disable several options at once
